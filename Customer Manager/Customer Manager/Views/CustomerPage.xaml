<?xml version="1.0" encoding="utf-8"?>    
<Page
    x:Class="Customer_Manager.Views.CustomerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:Customer_Manager.Models"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    mc:Ignorable="d">

    <ScrollViewer>
        <StackPanel Padding="24" Spacing="16">

            <!-- Title -->
            <TextBlock Text="Customers"
                       FontSize="24"
                       FontWeight="Bold"
                       FontFamily="Segoe UI Variable"
                       Foreground="{ThemeResource TextFillColorPrimary}" />

            <!-- Controls -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
                <TextBox x:Name="SearchTextBox"
                         Width="240"
                         PlaceholderText="Search by name or email"
                         TextChanged="SearchTextBox_TextChanged" />
                <Button Content="Refresh" Click="RefreshButton_Click" />
                <Button Content="Add" Click="AddCustomer_Click" />
            </StackPanel>

            <!-- SME / SV Filter -->
            <StackPanel Orientation="Horizontal" Spacing="12">
                <ToggleButton x:Name="SmeToggle" Content="SME = IG" Click="FilterToggle_Click" />
                <ToggleButton x:Name="SvToggle" Content="SV = HC" Click="FilterToggle_Click" />
            </StackPanel>

            <!-- DataGrid -->
            <controls:DataGrid x:Name="CustomerDataGrid"
                   ItemsSource="{x:Bind _customers}"
                   AutoGenerateColumns="False"
                   CanUserSortColumns="True"
                   IsReadOnly="True"
                   MinHeight="400"
                   DoubleTapped="CustomerDataGrid_DoubleTapped">

                <controls:DataGrid.Columns>
                    <controls:DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="2*" />
                    <controls:DataGridTextColumn Header="Email" x:Name="EmailColumn" Binding="{Binding Email}" Width="2*" />
                    <controls:DataGridTextColumn Header="SME" Binding="{Binding SME}" Width="Auto" />
                    <controls:DataGridTextColumn Header="SV" Binding="{Binding SV}" Width="Auto" />
                    <controls:DataGridTextColumn Header="Month" Binding="{Binding Month}" Width="Auto" />
                    <controls:DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="Auto" />
                    <controls:DataGridTextColumn Header="Editor" Binding="{Binding Editor}" Width="Auto" />

                    <controls:DataGridTemplateColumn Header="Actions" Width="Auto">
                        <controls:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" Spacing="4">
                                    <Button Content="ðŸ“‚" Click="OpenFolder_Click" />
                                    <Button Content="ðŸ—‘" Click="DeleteRow_Click" />
                                </StackPanel>
                            </DataTemplate>
                        </controls:DataGridTemplateColumn.CellTemplate>
                    </controls:DataGridTemplateColumn>
                </controls:DataGrid.Columns>
            </controls:DataGrid>


        </StackPanel>
    </ScrollViewer>
</Page>

